<%- model_class = Article.new.class -%>

<strong>
	Welcome to Uncooked Blog. The Rawest blog in the world! What makes this blog so Raw? Anyone can post anything, anytime. The only catch is that you can't edit or delete your posts. There are also no authors. If you want people to know you wrote a blog post, tag yourself in the post. 

So that's it. Post away! 
</strong>

  <%= will_paginate @articles %>

<br><br>
<h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>

<br>

<%= link_to t('.new article', :default => t("helpers.links.new article")),
            new_article_path,
            :class => 'btn btn-primary' %>

<br>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:vote) %></th>
	  <th><%= model_class.human_attribute_name(:title) %></th>
      <th><%= model_class.human_attribute_name(:article) %></th>
	  <th><%= model_class.human_attribute_name(:tags) %></th>
      <% if can? :update, @article %>
	  <th><%= model_class.human_attribute_name(:author_id) %></th>
	  <% end %>
      <th><%= model_class.human_attribute_name(:published) %></th>
     <% if can? :update, @article %>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
	<% end %>
    </tr>
  </thead>
  <tbody>
    <% @articles.each do |article| %>
      <tr>
        <td><%= link_to 'I like this', vote_article_path(article) + '?vote=1' %><br>
			<%= link_to 'I hate this', vote_article_path(article) + '?vote=-1' %></td>
		<td><%= link_to article.title, article_path(article) %></td>
        <td><%= markdown article.body %></td>
  	    <td><%= article.tag_tokens %></td>
        <% if can? :update, @article %>
 		<td><%= article.author_name %></td>
		<% end %>
        <td><%= article.formatted_created_at %></td>
		<td>
		<!-- Using Can Can gem to determine if a user has edit/destroy permissions -->       
		<% if can? :update, @article %>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_article_path(article), :class => 'btn btn-mini' %>
		<% end %>
		<% if can? :update, @article %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      article_path(article),
                      :method => :delete,
                      :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
                      :class => 'btn btn-mini btn-danger' %>
		<% end %>
        </td> 
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_article_path,
            :class => 'btn btn-primary' %>
